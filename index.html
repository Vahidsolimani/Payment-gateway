<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/output.css">
    <link rel="stylesheet" href="css/master.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <title>درگاه پرداخت</title>
</head>

<body class="" >
    <section class="w-full">
        <div class="container mx-auto relative">
            <div class="flex  items-center p-5 bg-white">
                <div class="w-1/6">
                    <figure class="w-1/2 scale-150 md:scale-100 ">
                        <img src="img/168-GraFa-1.png" alt="">
                    </figure>
                </div>
                <div class="w-4/6">
                    <h1 class="text-center text-blue-500 font-bold text-lg md:text-2xl">درگاه پرداخت اینترنتی پرداخت
                        الکترونیک سامان</h1>
                </div>
                <div class="w-1/6 flex justify-end">
                    <figure class="w-1/2  scale-150 md:scale-100">
                        <img src="img/Pardakht-Electronic-Saman-Sep-Logo-PNG-Way2pay-97-07-11.png" alt="">
                    </figure>
                </div>
            </div>
            <div class="p-5 bg-slate-200 ">
                <div class="flex justify-between items-center py-2 border-b-2 border-green-950">
                    <div class="flex justify-end text-blue-500">
                        <p>زمان باقی مانده <span class="font-bold" id="timer"> 10:00 </span></p>
                    </div>
                    <div class="text-blue-500 flex">
                        <p> اطلاعات کارت </p> <i
                            class="bi text-blue-500 scale-125 mr-1 bi-credit-card-2-front-fill"></i>
                    </div>
                </div>
            </div>
            <div class="p-5 flex gap-x-2 bg-yellow-200">
                <div class="xl:w-1/3 hidden xl:flex justify-center">
                    <div
                        class="p-28 box flex *:flex *:items-center border-2 border-black *:border-black *:border-2 *:bg-white gap-2 *:font-bold *:rounded *:cursor-pointer flex-wrap ">
                        <div data-key="9" class="px-5 key ">9</div>
                        <div data-key="8" class="px-5 key ">8</div>
                        <div data-key="7" class="px-5 key ">7</div>
                        <div data-key="6" class="px-5 key ">6</div>
                        <div data-key="5" class="px-5 key ">5</div>
                        <div data-key="4" class="px-5 key ">4</div>
                        <div data-key="3" class="px-5 key ">3</div>
                        <div data-key="2" class="px-5 key ">2</div>
                        <div data-key="1" class="px-5 key ">1</div>
                        <div data-key="0" class="px-5 key ">0</div>
                        <button class="px-1 edit flex items-center">اصلاح</button>
                        <button class="px-2 delet flex items-center"> حذف </button>
                    </div>
                </div>

                <div class="xl:w-2/3 ">
                    <form class="" action="#">
                        <div
                            class="flex *:rounded *:text-center inp *:flex *:w-1/5 justify-center items-center *:h-2/5/5 flex-nowrap gap-2">
                            <input class="py-2 ary" type="number" placeholder="****" autofocus>
                            <input class="py-2 ary" type="number" placeholder="****">
                            <input class="py-2 ary" type="number" placeholder="****">
                            <input class="py-2 ary" type="number" placeholder="****" autocomplete="off">
                            <label class="text-xs justify-end text-end md:text-lg">: شماره کارت </label>
                        </div>
                        <div class="mt-5 *:rounded flex items-center  justify-between">
                            <input class="w-4/5 ary py-2 text-center" id="cvv2" autocomplete="new-password"
                                type="password" placeholder="cvv2" maxlength="5">
                            <label class=" text-xs md:text-lg"> :cvv2 </label>
                        </div>
                        <div class="mt-5 *:rounded flex items-center  justify-between">
                            <input class="w-4/5 py-2 ary text-center" id="ramz" autocomplete="new-password"
                                type="password" maxlength="7" placeholder=" رمز دوم">
                            <label class=" text-xs md:text-lg">: رمز اینترنتی</label>
                        </div>
                        <div class="mt-5 *:rounded flex items-center  justify-between">
                            <input class="w-1/5 py-2 ary text-center" id="moon" maxlength="2" type="number" placeholder="ماه">
                            <input class="w-1/5 py-2 ary text-center" id="year" maxlength="2" type="number" placeholder="سال">
                            <label class=" text-xs md:text-lg">: تاریخ انقضا </label>
                        </div>
                        <div class="mt-5 *:rounded flex items-center  justify-between">
                            <input id="cap" class="w-1/5 py-2 ary  text-center " maxlength="3" type="text"> 
                          <div class="flex items-center *:w-1/3 justify-center"> <input class="scale-150 mx-5 " type="checkbox"> <p class="opacity-65 mx-5 text-sm">من ربات نیستم</p>  <img class="scale-75" src="img/images.jfif" alt=""> </div>
                            <label class=" text-xs md:text-lg " for="">: کد امنیتی </label>
                        </div>
                        <div class="mt-5  *:rounded flex items-center  justify-between">
                            <input class="w-4/5 py-2 ary text-center" type="text" placeholder="ایمیل">
                            <label class=" text-sm text-end md:text-lg" for="">: ایمیل (اختیاری)</label>
                        </div>
                        <div class=" flex  gap-x-3 mt-5 justify-center items-center">
                            <button class="bg-red-600  py-2 px-4 text-white rounded" type="reset"> انصراف </button>
                            <button id="sub" class="bg-blue-800 py-2 px-4 text-white rounded" type="submit"> پرداخت </button>
                        </div>
                    </form>
                </div>
            </div>
            <div id="pop" class="  md:w-1/4  border md:hidden text-center   justify-center flex-wrap p-5 rounded h-[200px]  absolute -left-[200%] -top-[200%]">
                <p class="text-xl text-blue-600 text-center">میتونی مشخصات کارت وارد شده رو ذخیره کنی</p>
               <div class="flex my-14  *:bg-black *:text-white justify-around content-around *:rounded items-center gap-x-10">
                <button id="del" class="py-2 px-8  ">حذف</button>
                <button id="ok" class="py-2 px-8  ">ذخیره</button>
               </div>
            </div>
        </div>
    </section>
    <script>
        const inp = document.querySelectorAll('.inp>input')
        const cvv2 = document.getElementById('cvv2')
        const ramz = document.getElementById('ramz')
        const moon = document.getElementById('moon')
        const cap = document.getElementById('cap')
        const year = document.getElementById('year')
        const keys = document.querySelectorAll('.key')
        const ary = document.querySelectorAll('.ary')
        const _delet = document.querySelector('.delet')
        const _edit = document.querySelector('.edit')
        const _send = document.getElementById('sub')
        const pop = document.getElementById('pop')
        const del = document.getElementById('del')
        const ok = document.getElementById('ok')
        const timerElement = document.getElementById('timer')
        let flag = 0
        let timeLeft = 10 * 60;
        inp.forEach((val, i) => {
            val.addEventListener('keyup', (e) => {
                let temp = e.keycode || e.which
                if (temp == 8) {
                    if (val.value.length == 0) {
                        if (i != 0) {
                            val.previousElementSibling.focus()
                        }
                    }
                } else {
                    if (i > 0 && inp[i - 1].value.length != 4) {
                        val.value = null
                        inp[i - 1].focus()
                    } else {
                        if (val.value.length >= 4) {
                            val.value.slice(0, 4)
                            if (i != 3) {
                                val.nextElementSibling.focus()
                            } else {
                                cvv2.focus()
                            }
                        }
                    }
                }
            })
        })
        cvv2.addEventListener('keyup', ()=>{
            let x = cvv2.value.length
        
            if(x == 5){
                ramz.focus()
            }

        })
        ramz.addEventListener('keyup', ()=>{
            let x = ramz.value.length
        
            if(x == 7){
                moon.focus()
            }

        })
        moon.addEventListener('keyup', ()=>{
            let x = moon.value.length
        
            if(x == 2){
                year.focus()
            }

        })
        year.addEventListener('keyup', ()=>{
            let x = year.value.length
        
            if(x == 2){
                cap.focus()
            }

        })
        ///////////////////////keybord//////////////////
        keys.forEach(key => {
            key.addEventListener('click', (e) => {
                let value = e.target.getAttribute('data-key');
                let x = ary[flag];
                if (x) {
                    x.value += value;
                }
    
            });
        })
        // ary.forEach((val, i)=>{
        //             val.addEventListener('click', ()=>{
        //                 let x = val.value.length
        //                 console.log(x);
        //                 if(x[0] == 4){
        //                     val.nextElementSibling.focus()
        //                 }
                        
        //             })
        //         })
        ary.forEach((val, i) => {
            val.addEventListener('click', (e) => {
                flag = i
                console.log(flag)
            })
        })
        _edit.addEventListener('click', () => {
            const x = ary[flag]
            if (x) {
                x.value = x.value.slice(0, -1)
            }
            _edit.style.backgroundColor = 'green'
            setTimeout(() => {
                _edit.style.backgroundColor = 'white'
            }, 2000);
        })    
        _delet.addEventListener('click', () => {
            let x = ary[flag]
           
            if (x) {
                x.value = null
            }
            _delet.style.backgroundColor = 'red'
            setTimeout(() => {
                _delet.style.backgroundColor = 'white'
            }, 2000);
        })
        _send.addEventListener('click', (e)=>{
            setTimeout(() => {
                pop.style.backdropFilter = 'blur(5px)';
                pop.style.display = 'inline-block'
                pop.style.left = '0%'
                pop.style.top = '50%'
                setTimeout(() => {
                    location.reload()
                }, 5000);
            }, 1000);
        })
        ok.addEventListener('click', () =>{
                pop.remove()
                alert('ذخیره شد')
                
        })
        del.addEventListener('click', () =>{
            pop.remove()
            alert('حذف شد')
        })
        const timer = setInterval(() => {
  const minutes = (timeLeft / 60) | 0; 
  const seconds = timeLeft % 60;

  timerElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

  if (timeLeft <= 0) {
    clearInterval(timer); 
    payButton.disabled = true; 
    timerElement.textContent = '00:00'; 
    alert('زمان شما به پایان رسید.');
  }

  timeLeft--; 
}, 1000);

    </script>
</body>

</html>